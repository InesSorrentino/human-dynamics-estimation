cmake_minimum_required(VERSION 2.6)
project(hde-interface)

find_package(YARP)

yarp_idl_to_dir("../human-forces-provider/thrifts/Force6D.thrift" "${CMAKE_CURRENT_BINARY_DIR}/autogenerated" THRIFT_FT_SOURCES THRIFT_FT_HEADERS THRIFT_FT_INCLUDE_DIRS)

yarp_idl_to_dir("../human-state-provider/thrifts/HumanState.thrift" "${CMAKE_CURRENT_BINARY_DIR}/autogenerated" THRIFT_STATE_SOURCES THRIFT_STATE_HEADERS THRIFT_STATE_INCLUDE_DIRS)
yarp_idl_to_dir("../human-state-provider/thrifts/HumanStateProviderService.thrift" "${CMAKE_CURRENT_BINARY_DIR}/autogenerated" THRIFT_SERVICE_SOURCES THRIFT_SERVICE_HEADERS THRIFT_SERVICE_INCLUDE_DIRS)

yarp_idl_to_dir("../human-dynamics-estimator/thrifts/HumanDynamics.thrift" "${CMAKE_CURRENT_BINARY_DIR}/autogenerated" THRIFT_DYNAMICS_SOURCES THRIFT_DYNAMICS_HEADERS THRIFT_DYNAMICS_INCLUDE_DIRS)



set(hde_interface_headers include/HDEInterfaceModule.h include/HDEControlBoardDriver.h)
set(hde_interface_sources src/main.cpp src/HDEInterfaceModule.cpp src/HDEControlBoardAxisInfo.cpp src/HDEControlBoardDriverPositionControl.cpp src/HDEControlBoardDriverVelocityControl.cpp src/HDEControlBoardDriverEncoder.cpp src/HDEControlBoardDriverTorqueControl.cpp)

include_directories(${YARP_INCLUDE_DIRS} 
                    ${THRIFT_FT_INCLUDE_DIRS} 
                    ${THRIFT_STATE_INCLUDE_DIRS} 
                    ${THRIFT_SERVICE_INCLUDE_DIRS}
                    ${THRIFT_DYNAMICS_INCLUDE_DIRS}
                    -I include/)

add_executable(hde-interface ${hde_interface_headers} 
                             ${hde_interface_sources} 
                             ${THRIFT_FT_HEADERS} 
                             ${THRIFT_FT_SOURCES} 
                             ${THRIFT_STATE_HEADERS}
                             ${THRIFT_STATE_SOURCES}
                             ${THRIFT_SERVICE_HEADERS}
                             ${THRIFT_SERVICE_SOURCES}
                             ${THRIFT_DYNAMICS_HEADERS}
                             ${THRIFT_DYNAMICS_SOURCES})

target_link_libraries(hde-interface ${YARP_LIBRARIES})

#install(TARGETS hde- interface RUNTIME DESTINATION bin)
